#!/usr/bin/awk -f
#
# This program filters a stream of iRODS sessions for those generated by a given
# client comming from a given IP address. It reads the sessions from standard in
# and write the filtered stream to standard out.
#
# It requires two command line parameters and both should be provided in awk
# form, i.e., `-v var=val`.
#
# PARAMETERS:
#  ADDRESS: The IP address to filter on
#
# EXAMPLE:
#  filter-sessions-by-address -v ADDRESS=129.114.60.118 < irods.sessions


BEGIN {
  RS = "ยง";
  FS = "โข";
}


$2 ~ "from " ADDRESS {
  printf "%s%s", RS, $0;
}
